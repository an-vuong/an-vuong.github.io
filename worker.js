function convolution(o,n,t){for(var a=n.reduce(function(o,n){return o+n}),r=Math.sqrt(n.length),l=Math.floor(r/2),s=[],e=0;e<o.length;e++){for(var i=e%t,u=Math.floor(e/t),h=0,c=0;c<n.length;c++){var f=c%r,v=Math.floor(c/r),g=i+f-l;g<0&&(g=0),g>t-1&&(g=t-1);var d=u+v-l;d<0&&(d=0),d>t-1&&(d=t-1),h+=o[g+d*t]*n[c]}s.push(h/a)}return s}function convolution4(o,n,t,a){for(var r=[],l=0;l<o.length/4;l++)r.push(o[4*l+a]);return convolution(r,n,t)}this.fns={convolution:convolution,convolution4:convolution4},this.onmessage=function(o){var n=this.fns[o.data[0]];if(n){var t=this.performance.now(),a=n(o.data[1],o.data[2],o.data[3],o.data[4]),r=this.performance.now();console.log("Call to blur took "+(r-t)+" milliseconds."),this.postMessage(a)}else this.postMessage(null)};